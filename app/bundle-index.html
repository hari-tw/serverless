<!DOCTYPE html>
<html lang="en">
  <head>
    <title>LAB Admin</title>
    <meta charset="UTF-8">
    <script type="text/javascript" src="apiGateway-js-sdk/lib/axios/dist/axios.standalone.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/rollups/hmac-sha256.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/rollups/sha256.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/components/hmac.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/components/enc-base64.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/url-template/url-template.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/sigV4Client.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/apiGatewayClient.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/simpleHttpClient.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/utils.js"></script>
    <script type="text/javascript" src="apiGateway-js-sdk/apigClient.js"></script>

    <script type="text/javascript" src="bundle-app.js"></script>
  </head>
<body>

<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.41.min.js"></script>

<script>
/**
   * @param credentials {identityId, accessKey, secretKey, accessToken}
   */
  function saveCredentials(credentials) {
    // Put the object into storage
    console.log('Saving credentials to local storage');
    console.log(JSON.stringify(credentials));
    localStorage.setItem('credentials', JSON.stringify(credentials));
  }
    
function getCredentials() {
  // Retrieve the object from storage
  return localStorage.getItem('credentials');
}

// function loadAdmin(){
//   // We'll ensure this code runs only on the admin page
//   if(window.location.pathname == '/admin/' || true){
//     // Our first line of defense will be to check and make sure a JWT exists
//     // If it doesn't we'll redirect back to the homepage
//     var credentials = JSON.parse(getCredentials());

//     if(credentials){
//       AWS.config.credentials = new AWS.CognitoIdentityCredentials({
//         IdentityPoolId: 'us-west-2:494c53b0-e00a-4c41-b060-958e5db6c338',
//         Logins: { 'graph.facebook.com': response.authResponse.accessToken },

//         // optional name, defaults to web-identity
//         // See the RoleSessionName param for AWS.STS.assumeRoleWithWebIdentity (linked below)
//         RoleSessionName: 'web'
//       });

//       AWS.config.credentials.clearCachedId();

//       AWS.config.credentials.get(function(err) {
//         if (err) return console.log("Error", err);
//         console.log("Cognito Identity Id", AWS.config.credentials.identityId);

//         var credentials = {
//           identityId: AWS.config.credentials.identityId,
//           accessKey: AWS.config.credentials.accessKeyId,
//           secretKey: AWS.config.credentials.secretAccessKey,
//           sessionToken: AWS.config.credentials.sessionToken
//         };

//         // Store credentials in local storage
//         saveCredentials(credentials);
//       });
      
      
//       var options = {
//         accessKey: credentials.accessKey,
//         secretKey: credentials.secretKey,
//         sessionToken: credentials.sessionToken, //OPTIONAL: If you are using temporary credentials you must include the session token
//         region: 'us-west-2',
//         systemClockOffset: 0, // OPTIONAL: An offset value in milliseconds to apply to signing time
//         retries: 2
//       };

//       var apigClient = apigClientFactory.newClient(options);
//       var params = null
//       var body = null
//       var additionalParams = {
//         headers: {
//           'Content-Type': 'application/json'
//         }
//       };

//       // Here we are calling the subscribersGet method that was generated for us
//       // On a successful response we'll take the array of emails and display them
//       // on our page.
//       apigClient.adminGet(params, body, additionalParams)
//       .then(function(result) {
//         // Add success callback code here.
//         console.log(result)
//       }).catch( function(result) {
//         // Add error callback code here.
//         console.log('------')
//         console.log(result)
//       });
//       // apigClient.subscribersGet().then(function(data){
//       //   for(var i = 0; i < data.data.message.length; i++){
//       //       $('#subscribers').append('<h4>' + data.data.message[i].email + '</h4>');
//       //   }
//       // });

//     } else {
//       window.location = '/index.html';
//     }
//   }
// }

// loadAdmin();
</script>

Admin!


  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/about">About</a></li>
      <li><a href="/admin.html">ADMIN</a></li>
    </ul>
  </nav>

</body>
</html>
